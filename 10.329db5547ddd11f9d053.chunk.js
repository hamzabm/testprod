webpackJsonp([10],{1294:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RecieptModificationModule",(function(){return g}));var a=i(0),n=i(10),s=i(18),c=i(578),o=i(6),l=i(1488),d=i(14),r=i(1420),p=i(1421),h=i(229),g=(function(){function t(){}return t=__decorate([Object(a.NgModule)({imports:[n.CommonModule,c.a,s.e,l.a,o.d,d.FormsModule,d.ReactiveFormsModule,h.a],declarations:[r.a,p.a],entryComponents:[p.a]})],t)})()},1420:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var a=i(0),n=i(5),s=i(6),c=i(18),o=i(234),l=i(1421),d=(function(){function t(t,e,i){var a=this;this.store=t,this.router=e,this.modalService=i,this.limit=10,this.page=1,this.store.select("recieptModification").subscribe((function(t){t&&t.allReciepts&&(a.allReciepts=t.allReciepts.bookings)}))}return t.prototype.ngOnInit=function(){this.getAllReciepts(this.page)},t.prototype.getAllReciepts=function(t){this.store.dispatch({type:o.e.GET_ALL_RECIEPTS,payload:{limit:this.limit,currentPage:this.page}})},t.prototype.pageChanged=function(t){this.page=t,this.getAllReciepts(this.page)},t.prototype.openEditRecieptModal=function(t){this.modalService.open(l.a,{size:"lg"}).componentInstance.recieptAllData={data:t,page:this.page}},t=__decorate([Object(a.Component)({selector:"e-reciept-modification",template:i(1491)}),__metadata("design:paramtypes",[n.Store,s.c,c.d])],t)})()},1421:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var a=i(0),n=i(5),s=i(18),c=i(234),o=i(19),l=i(20),d=(function(){function t(t,e,i,a){var n=this;this.store=t,this.activeModal=e,this.toastrService=i,this.baThemeSpinner=a,this.disableClick=!1,this.totalAmount=0,this.weight=0,this.store.select("recieptModification").subscribe((function(t){t&&t.recieptData&&(n.recieptData=t.recieptData,n.quantity=n.recieptData.quantity?n.recieptData.quantity:"",n.recieptData.vehiclesRequired>1?n.chargedWeight=n.recieptData.weightCapacity:n.chargedWeight=n.recieptData.approxShipmentWeight,n.totalChargedAmount=n.chargedWeight*n.recieptData.bidRate),t&&1==t.recieptModified&&n.closeModal(),t&&1==t.receiptModifyError&&(n.disableClick=!1)}))}return t.prototype.ngOnInit=function(){this.currentDate=new Date,this.store.dispatch({type:c.e.GET_RECIEPT_DATA,payload:{bidId:this.recieptAllData.data._id}})},t.prototype.calculateAmount=function(t){this.totalAmount=t*this.recieptData.bidRate,t>this.chargedWeight?(this.chargedWeight=t,this.totalChargedAmount=this.totalAmount):(this.recieptData.vehiclesRequired>1?this.chargedWeight=this.recieptData.weightCapacity:this.chargedWeight=this.recieptData.approxShipmentWeight,this.totalChargedAmount=this.chargedWeight*this.recieptData.bidRate)},t.prototype.modify=function(){return this.quantity?this.quantity<=0?void this.toastrService.error("Quantity cannot be zero."):this.weight<=0?void this.toastrService.error("Actual weight cannot be zero."):this.invoiceNo?(this.disableClick=!0,void this.store.dispatch({type:c.e.MODIFY_RECIEPT,payload:{bidID:this.recieptAllData.data._id,pickUpOtp:this.recieptData.pickUpOtp,quantity:this.quantity,actualWeight:this.weight,shipmentInvoiceNo:this.invoiceNo,freightAmount:this.totalAmount,bookingID:this.recieptData.bookingID,utcOffset:-(new Date).getTimezoneOffset(),pickupLatitude:this.recieptData.pickupCoordinates.coordinates[1],pickupLongitude:this.recieptData.pickupCoordinates.coordinates[0],driverID:this.recieptData.driverID,page:this.recieptAllData.page,chargedWeight:this.chargedWeight,chargedFreightAmount:this.totalChargedAmount}})):void this.toastrService.error("Shipper Commercial Invoice no. is required."):void this.toastrService.error("Quantity is required.")},t.prototype.closeModal=function(){this.activeModal.close()},t=__decorate([Object(a.Component)({selector:"modify-reciept-modal",styles:[i(1489)],template:i(1490)}),__metadata("design:paramtypes",[n.Store,s.b,o.b,l.d])],t)})()},1488:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var a=i(6),n=i(1420),s=[{path:"",component:n.a}],c=a.d.forChild(s)},1489:function(t,e){t.exports=".grey-headings{font-family:Nunito;font-size:14px;font-weight:600;line-height:1.07;color:#9a9a9a}.black-text{font-family:Nunito;font-size:14px;font-weight:600;color:#262729}.grey-bold-heading{font-family:Nunito;font-size:12px;font-weight:bold;line-height:1.25;color:#707070;text-transform:uppercase}\n"},1490:function(t,e){t.exports='<div style="padding:5%" *ngIf="recieptData">\n    <div class="row">\n        <div class="col-7 d-flex align-items-center justify-content-end">\n            <span class="modal-heading">Receipt</span>\n        </div>\n        <div class="col-5 d-flex align-items-center justify-content-end">\n            <button class="close" aria-label="Close" (click)="closeModal()">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n    </div>\n\n    <div class="row " style="margin-top:4%">\n        <div class="col-12">\n            <span class="grey-headings">E-Receipt Number:</span>\n            <span class="black-text">{{recieptData.eReceiptNumber}}</span>\n        </div>\n    </div>\n    <div class="row d-flex mt-4">\n        <div class="col-6">\n            <span class="grey-headings">Fleet Owner :</span>\n            <span class="black-text">{{recieptData.fleetOwnerFirstName}} {{recieptData.fleetOwnerLastName}}</span>\n        </div>\n        <div class="col-6 d-flex justify-content-end">\n            <span class="grey-headings">{{recieptData.vehicleAddress}}</span>\n        </div>\n    </div>\n\n    <div style="border: solid 0.5px #e8e8e8;padding:3%;margin-top:3%">\n        <div class="row d-flex align-items-center">\n            <div class="col-3">\n                <p class="grey-headings">Vehicle No : </p>\n            </div>\n            <div class="col-3 d-flex justify-content-end">\n                <p class="black-text">{{recieptData.plateNumber}}</p>\n            </div>\n            <div class="col-3 d-flex justify-content-start">\n                <p class="grey-headings">Driver Name : </p>\n            </div>\n            <div class="col-3 d-flex justify-content-end">\n                <p class="black-text">{{recieptData.driverFirstName}} {{recieptData.driverLastName}}</p>\n            </div>\n        </div>\n\n        <div class="row d-flex align-items-center">\n            <div class="col-3">\n                <p class="grey-headings">Invoice/manifest No : </p>\n            </div>\n            <div class="col-3 d-flex justify-content-end">\n                <p class="black-text">{{recieptData.customID}}</p>\n            </div>\n            <div class="col-3 d-flex justify-content-start">\n                <p class="grey-headings">License No :</p>\n            </div>\n            <div class="col-3 d-flex justify-content-end">\n                <p class="black-text">{{recieptData.licenceNumber}}</p>\n            </div>\n        </div>\n        <div class="row d-flex align-items-center">\n            <div class="col-3">\n                <p class="grey-headings">Date of Receipt : </p>\n            </div>\n            <div class="col-3 d-flex justify-content-end">\n                <p class="black-text">{{currentDate | date: \'dd-MM-yyyy\'}}</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="row" style="margin-top: 4%">\n        <div class="col-6">\n            <p class="grey-bold-heading">Booker Details</p>\n            <p class="black-text" style="font-size:16px">{{recieptData.pickupPersonName}}</p>\n            <p class="black-text" style="font-size:16px;font-weight: normal">{{recieptData.pickupPersonMobile}}</p>\n            <p class="grey-headings">Booker Address</p>\n            <p class="black-text" style="font-size:16px">{{recieptData.pickupAddress}}</p>\n            \x3c!-- <p class="grey-headings" style="font-weight: 300">{{recieptData.pickupCity}},{{recieptData.pickupCountry}}</p> --\x3e\n        </div>\n        <div class="col-6" style="text-align:right">\n            <p class="grey-bold-heading">Receiver Details</p>\n            <p class="black-text" style="font-size:16px">{{recieptData.receiverName}}</p>\n            <p class="black-text" style="font-size:16px;font-weight: normal">{{recieptData.receiverMobile}}</p>\n            <p class="grey-headings">Receiver Address</p>\n            <p class="black-text" style="font-size:16px">{{recieptData.receiverAddress}}</p>\n            \x3c!-- <p class="grey-headings" style="font-weight: 300">{{recieptData.receiverCity}},{{recieptData.receiverCountry}}</p> --\x3e\n        </div>\n    </div>\n\n    <div style="border: solid 0.5px #e8e8e8;padding:3%;margin-top:3%">\n        <div class="row" style="padding-left:2%">\n            <p class="black-text" style="font-size:16px;font-weight:bold">{{recieptData.shipmentName}}</p>\n        </div>\n\n        <div class="row">\n            <div class="col-4">\n                <p class="grey-headings">Quantity*</p>\n                <input type="text" class="input-box" onlyNumbers placeholder="Quantity" [(ngModel)]="quantity">\n            </div>\n            <div class="col-4">\n                <p class="grey-headings" style="text-align:center">Package Type</p>\n                <p class="black-text" style="font-size:16px;text-align:center">{{recieptData.typeOfPakcage}}</p>\n            </div>\n            <div class="col-4">\n                <p class="grey-headings" style="text-align:right">Actual Weight (kg)</p>\n                <input type="text" class="input-box" onlyNumbers placeholder="Weight" [(ngModel)]="weight" maxlength="7" (ngModelChange)="calculateAmount(weight)"\n                    style="text-align: right">\n            </div>\n        </div>\n        <div class="row d-flex mt-4">\n            <div class="col-3">\n                <p class="grey-headings">Bid Rate: </p>\n            </div>\n            <div class="col-4">\n                <p class="black-text">Nrs {{recieptData.bidRate}}/Kgs</p>\n            </div>\n        </div>\n        <div class="row d-flex mt-4">\n            <div class="col-3">\n                <p class="grey-headings">Charged Weight: </p>\n            </div>\n            <div class="col-4">\n                <p class="black-text">Nrs {{chargedWeight}}/Kgs</p>\n            </div>\n        </div>\n    </div>\n    <div class="row" style="background-color:#d8d8d8;padding: 3% 1% 1% 1%;margin: 0%;">\n        <div class="col-6">\n            <p class="black-text">Total Freight Amount :</p>\n        </div>\n        <div class="col-6 d-flex justify-content-end">\n            <p class="black-text">Nrs {{totalAmount.toFixed(2)}}</p>\n        </div>\n        <div class="col-6">\n            <p class="black-text">Charged Freight Amount :</p>\n        </div>\n        <div class="col-6 d-flex justify-content-end">\n            <p class="black-text">Nrs {{totalChargedAmount.toFixed(2)}}</p>\n        </div>\n    </div>\n    <div class="row" style="margin-top:2%">\n        <div class="col-6">\n            <input type="text" class="input-box" placeholder="Shipper Commercial Invoice Number*" [(ngModel)]="invoiceNo">\n        </div>\n        <div class="col-6">\n            <textarea type="text" class="input-box" placeholder="Any Notes? Type here..." [(ngModel)]="notes"></textarea>\n        </div>\n    </div>\n\n    <div class="row" style="margin-top: 4%">\n        <div class="col-8 d-flex justify-content-end">\n            <button type="button" class="wide-submit-btn" style="width:50%" (click)="modify()" [disabled]="disableClick">Save</button>\n        </div>\n    </div>\n</div>'},1491:function(t,e){t.exports='<div class="container-fluid">\n    <div class="row" style="margin-top:2%">\n        <div class="col-10 d-flex align-items-center">\n            <label class="dashboard-label">Modification of E-receipt</label>\n        </div>\n    </div>\n    <br>\n\n    <table class="table table-hover table-responsive">\n        <thead>\n            <tr class="row-bottom-border">\n                <th>E-Receipt Id</th>\n                <th>Booking ID</th>\n                <th>Booker name</th>\n                <th>Driver name</th>\n                <th>Pickup location</th>\n                <th>Delivery location</th>\n                <th>Action</th>\n\n            </tr>\n        </thead>\n        <tbody>\n            <tr class="row-bottom-border" *ngFor="let data of allReciepts | paginate: { itemsPerPage: limit, currentPage: page, totalItems: count }; let i = index">\n                <td style="width:10%">{{data.receiptID}}</td>\n                <td style="width:10%">{{data.customBookingId}}</td>\n                <td style="width:15%">{{data.shipperName}}</td>\n                <td style="width:15%">{{data.driverFirstName}} {{data.driverLastName}}</td>\n                <td style="width:20%">{{data.pickupAddress}},{{data.pickupCity}},{{data.pickupState}}</td>\n                <td style="width:20%">{{data.receiverAddress}}</td>\n                <td style="width:10%">\n                    <i class="fa fa-pencil-square-o black-fa-fa" aria-hidden="true" style="float:none;font-size:16px" (click) = "openEditRecieptModal(data)"></i>\n                </td>\n            </tr>\n        </tbody>\n       \n    </table>\n    <div class="col col-xs-10 rar-algn">\n        <pagination-controls (pageChange)="pageChanged($event)" maxSize="5" directionLinks="true" autoHide="true" previousLabel="Previous"\n            nextLabel="Next" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page" screenReaderCurrentLabel="You\'re on page"></pagination-controls>\n    </div>\n</div>'}});